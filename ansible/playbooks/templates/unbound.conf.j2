server:
    # Listening interface
    interface: 0.0.0.0
    interface: ::0

    # Port to answer queries
    port: 53

    # Access control - allow from private networks
    access-control: 0.0.0.0/0 refuse
    access-control: 127.0.0.0/8 allow
{% for network in unbound_allowed_networks %}
    access-control: {{ network }} allow
{% endfor %}
    access-control: ::1 allow
    access-control: fe80::/10 allow

    # Privacy settings
    hide-identity: yes
    hide-version: yes

    # Performance tuning
    num-threads: 2
    msg-cache-slabs: 4
    rrset-cache-slabs: 4
    infra-cache-slabs: 4
    key-cache-slabs: 4

    # Cache sizes
    rrset-cache-size: 256m
    msg-cache-size: 128m

    # Prefetch
    prefetch: yes
    prefetch-key: yes

    # DNSSEC (auto-trust-anchor-file is configured by default in root-auto-trust-anchor-file.conf)
    val-clean-additional: yes

    # Logging (reduce for production)
    verbosity: 1
    log-queries: no

    # Hardening
    harden-glue: yes
    harden-dnssec-stripped: yes
    harden-below-nxdomain: yes
    harden-referral-path: yes
    use-caps-for-id: yes

    # Minimize queries for privacy
    qname-minimisation: yes
    qname-minimisation-strict: no

    # TTL settings
    cache-min-ttl: 3600
    cache-max-ttl: 86400

    # Do not query these addresses
    do-not-query-localhost: no

    # Root hints
    root-hints: "/usr/share/dns/root.hints"
