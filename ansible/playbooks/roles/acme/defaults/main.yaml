---
# roles/acme_client/defaults/main.yml

# The fully qualified domain name for the certificate.
# Defaults to the machine's FQDN.
acme_domain: "{{ ansible_facts.fqdn }}"

# The hostname used for certificate file names.
acme_hostname: "{{ ansible_facts.hostname }}"

# The base URL for your Vault's ACME directory.
acme_server_url: "https://vault.homelab.com:8200/v1/intermediate_ca/acme/directory"

# RSA key length for the certificate.
acme_key_length: 4096

# The command to run after a certificate is successfully installed.
acme_reload_cmd: "systemctl reload nginx 2>/dev/null || systemctl reload apache2 2>/dev/null || true"

# --- File paths and locations ---
acme_home: "/root/.acme.sh"
acme_script_path: "/usr/local/bin/renew-cert.sh"
acme_log_file_path: "/var/log/cert-renewal.log"
acme_cert_dir: "/etc/ssl/certs"
acme_key_dir: "/etc/ssl/private"
acme_renew_threshold_hours: 8

# --- Systemd Timer Scheduling ---
# Runs twice a day by default (e.g., at ~03:00 and ~15:00)
acme_timer_schedule: "*-*-* 03,15:00:00"
# Spreads out the execution within a 1-hour window to avoid
# all clients hitting the Vault server at the exact same time.
acme_timer_random_delay: "1h"

acme_cert_owner: "root"
acme_cert_group: "root"

acme_service_user: "root"
acme_service_group: "root"
